{% capture cross_related_cards %}
  {%- comment -%}
  Render related links across collections based on `related_*_day` front matter.
  Supports: related_dsa_day, related_ml_day, related_speech_day
  {%- endcomment -%}

  {%- if page.related_dsa_day -%}
    {%- assign _dsa_doc = site.dsa | where: "day", page.related_dsa_day | first -%}
    {%- if _dsa_doc -%}
      {%- assign post = _dsa_doc -%}
      {% include archive-single.html type="list" %}
    {%- endif -%}
  {%- endif -%}

  {%- if page.related_ml_day -%}
    {%- assign _ml_doc = site.ml_system_design | where: "day", page.related_ml_day | first -%}
    {%- if _ml_doc -%}
      {%- assign post = _ml_doc -%}
      {% include archive-single.html type="list" %}
    {%- endif -%}
  {%- endif -%}

  {%- if page.related_speech_day -%}
    {%- assign _speech_doc = site.speech_tech | where: "day", page.related_speech_day | first -%}
    {%- if _speech_doc -%}
      {%- assign post = _speech_doc -%}
      {% include archive-single.html type="list" %}
    {%- endif -%}
  {%- endif -%}
{% endcapture %}

{%- unless cross_related_cards == "" -%}
<div class="page__related page__related--full">
  <h2 class="page__related-title">Related across topics</h2>
  <style>
    /* Make section span full content width and use 2 equal columns */
    .page__related--full { float: inline-start; width: 100%; padding: 0; }
    .cross-related-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 2rem; }
    @media (max-width: 768px) { .cross-related-grid { grid-template-columns: 1fr; } }
    /* Ensure archive cards stretch nicely in the grid */
    .cross-related-grid .list__item, .cross-related-grid .grid__item { width: auto; float: none; margin: 0; }
  </style>
  <div class="cross-related-grid">
    {{ cross_related_cards }}
  </div>
</div>
{%- endunless -%}


